# Совместимость с Node.js

## Поддерживаемые версии Node.js

Проект настроен для работы со следующими версиями Node.js:
- **Рекомендуемая**: Node.js 18.x LTS
- **Поддерживаемая**: Node.js 16.x - 22.x

## Особенности работы с Node.js v22

При использовании Node.js v22 есть несколько особенностей:

1. **Криптографические модули**: Node.js v22 удалил поддержку устаревших криптографических алгоритмов, 
   что может вызывать проблемы со старыми библиотеками. Проект использует флаг `--openssl-legacy-provider` 
   для обеспечения совместимости.

2. **Предупреждения о устаревших API**: Новые версии выдают больше предупреждений о устаревших API. 
   Мы используем флаг `--no-deprecation` для их подавления.

3. **Потребление памяти**: Для более стабильной работы настроено выделение до 4 ГБ памяти через 
   флаг `--max-old-space-size=4096`.

## Решение проблем

### Ошибка EBADENGINE

Если вы видите предупреждение `npm warn EBADENGINE`, это означает, что ваша версия Node.js
отличается от той, что указана в `package.json`. Проект должен работать, но с некоторыми
предупреждениями. Вы можете:

1. Проигнорировать это предупреждение, все должно работать корректно с настроенными флагами
2. Установить Node.js v18.17.1 LTS для полной совместимости
3. Использовать NVM (Node Version Manager) для переключения между версиями Node.js

### Ошибки при сборке или запуске

Если у вас возникают ошибки при сборке или запуске проекта:

1. Выполните полную очистку проекта:
   ```
   npm run clean
   ```
   или
   ```
   node scripts/clean.js --clear-cache
   ```

2. Переустановите зависимости:
   ```
   npm install --legacy-peer-deps
   ```
   или воспользуйтесь скриптом:
   ```
   install-deps.bat
   ```

### Проблемы с версиями пакетов

Для обхода проблем совместимости пакетов, в проекте используется:

1. Флаг `--legacy-peer-deps` для npm, который игнорирует конфликты зависимостей
2. Файл `.npmrc` с настройками `legacy-peer-deps=true` и `engine-strict=false`
