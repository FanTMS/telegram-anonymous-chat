<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Telegram Anonymous Chat" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="description" content="Анонимный чат в Telegram для общения с незнакомцами" />
    <link rel="icon" href="favicon.ico" />
    <link rel="apple-touch-icon" href="logo192.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <title>Telegram Anonymous Chat</title>
    <base href="/" />
    <script>
        // Устанавливаем переменную для корректной работы на мобильных устройствах
        function setViewportHeight() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--tg-viewport-height', `${window.innerHeight}px`);
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', setViewportHeight);
        window.addEventListener('focusin', setViewportHeight);
        window.addEventListener('focusout', setViewportHeight);
        setViewportHeight();

        // Для SPA на Netlify, убедимся, что мы перенаправляем на правильный маршрут
        if (typeof window !== 'undefined' && window.location.pathname === '/') {
            // Проверяем авторизацию
            const isAuthenticated = !!localStorage.getItem('current_user_id');
            // Перенаправляем соответствующим образом
            if (isAuthenticated) {
                window.location.href = '/home';
            } else {
                window.location.href = '/register';
            }
        }
    </script>
</head>

<body>
    <noscript>Для работы приложения необходимо включить JavaScript.</noscript>
    <div id="root"></div>
</body>

</html> 