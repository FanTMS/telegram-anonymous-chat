[33mcommit 8d16616b431d25ec548d324967b2068a463f2cbb[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m, [m[1;31morigin/HEAD[m[33m)[m
Author: FanTMS <molo4ko900@mail.ru>
Date:   Wed Apr 9 20:21:44 2025 +0400

    –ú—Ü–º—Ü–º—Ü

[1mdiff --git a/src/pages/Chat.js b/src/pages/Chat.js[m
[1mindex be8abe3..8788206 100644[m
[1m--- a/src/pages/Chat.js[m
[1m+++ b/src/pages/Chat.js[m
[36m@@ -205,99 +205,40 @@[m [mconst Chat = () => {[m
 [m
     useEffect(() => {[m
         const loadChatDetails = async () => {[m
[32m+[m[32m            setIsLoading(true);[m
[32m+[m[32m            let loadErrors = [];[m
[32m+[m[41m            [m
             try {[m
                 if (!chatId) {[m
[31m-                    console.error("ID —á–∞—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω");[m
[32m+[m[32m                    setError('ID —á–∞—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω');[m
                     return;[m
                 }[m
                 [m
[31m-                if (!user) {[m
[31m-                    console.error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω");[m
[31m-                    setError('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è');[m
[31m-                    setIsLoading(false);[m
[31m-                    return;[m
[31m-                }[m
[31m-[m
[31m-                // –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –Ω–∞–ª–∏—á–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É—è –ª–∏–±–æ uid, –ª–∏–±–æ id[m
[31m-                const userId = user.uid || user.id;[m
[31m-                if (!userId) {[m
[31m-                    console.error("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω");[m
[31m-                    setError('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');[m
[31m-                    setIsLoading(false);[m
[31m-                    return;[m
[32m+[m[32m                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Firestore[m
[32m+[m[32m                try {[m
[32m+[m[32m                    const dbTestRef = doc(db, "system", "status");[m
[32m+[m[32m                    await getDoc(dbTestRef);[m
[32m+[m[32m                } catch (dbError) {[m
[32m+[m[32m                    console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:', dbError);[m
[32m+[m[32m                    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');[m
                 }[m
[31m-[m
[31m-                setIsLoading(true);[m
[31m-                setError(null);[m
                 [m
[31m-                // –û–±—ä—è–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é partnerId –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏[m
[31m-                let partnerIdForFriendCheck = null;[m
[31m-[m
[31m-                console.log("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —á–∞—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", userId);[m
[32m+[m[32m                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Ç–µ[m
[32m+[m[32m                const chatData = await getChatById(chatId);[m
                 [m
[31m-                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —á–∞—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ[m
[31m-                const chatStatus = await checkChatMatchStatus(userId);[m
[31m-                let chatDetails;[m
[32m+[m[32m                if (!chatData) {[m
[32m+[m[32m                    setError('–ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω');[m
[32m+[m[32m                    return;[m
[32m+[m[32m                }[m
                 [m
[31m-                if (chatStatus && chatStatus.id === chatId) {[m
[31m-                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ checkChatMatchStatus, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ[m
[31m-                    chatDetails = chatStatus;[m
[31m-                    [m
[31m-                    // –ï—Å–ª–∏ –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –µ—ë[m
[31m-                    if (chatStatus.partner) {[m
[31m-                        const partnerData = chatStatus.partner;[m
[31m-                        partnerIdForFriendCheck = partnerData.id; // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—Ä—É–∂–±—ã[m
[31m-                        setPartnerInfo({[m
[31m-                            id: partnerData.id,[m
[31m-                            name: partnerData.name || '–°–æ–±–µ—Å–µ–¥–Ω–∏–∫',[m
[31m-                            platform: partnerData.platform || 'unknown',[m
[31m-                            telegramData: partnerData.telegramData || null,[m
[31m-                            profilePicture: null, // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä –∏–∑ telegramData –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω[m
[31m-                            isOnline: true, // –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞[m
[31m-                            lastSeen: null[m
[31m-                        });[m
[31m-                        [m
[31m-                        console.log('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ:', partnerData);[m
[31m-                    }[m
[32m+[m[32m                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–∞—Ç–∞[m
[32m+[m[32m                if (!chatData.isActive && chatData.status === 'ended') {[m
[32m+[m[32m                    setChat({...chatData, isEnded: true});[m
[32m+[m[32m                    showToast('–≠—Ç–æ—Ç —á–∞—Ç –±—ã–ª –∑–∞–≤–µ—Ä—à–µ–Ω', 'info');[m
                 } else {[m
[31m-                    // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ checkChatMatchStatus, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π getChatById[m
[31m-                    chatDetails = await getChatById(chatId);[m
[31m-                    [m
[31m-                    if (chatDetails.type === 'support') {[m
[31m-                        console.log('–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è —á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏');[m
[31m-                        const supportInfo = {[m
[31m-                            id: 'support',[m
[31m-                            name: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞',[m
[31m-                            isOnline: true,[m
[31m-                            profilePicture: null,[m
[31m-                            lastSeen: null,[m
[31m-                            isSupportChat: true[m
[31m-                        };[m
[31m-                        setPartnerInfo(supportInfo);[m
[31m-                        console.log('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –≤ —á–∞—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:', supportInfo);[m
[31m-                    } else if (chatDetails.participants && chatDetails.participants.length > 0) {[m
[31m-                        // –ù–∞—Ö–æ–¥–∏–º ID –ø–∞—Ä—Ç–Ω–µ—Ä–∞[m
[31m-                        const partnerId = chatDetails.participants.find(id => id !== userId);[m
[31m-                        partnerIdForFriendCheck = partnerId; // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—Ä—É–∂–±—ã[m
[31m-                        [m
[31m-                        if (partnerId && chatDetails.participantsData && chatDetails.participantsData[partnerId]) {[m
[31m-                            const partner = chatDetails.participantsData[partnerId];[m
[31m-                            setPartnerInfo({[m
[31m-                                id: partnerId,[m
[31m-                                name: partner.name || '–°–æ–±–µ—Å–µ–¥–Ω–∏–∫',[m
[31m-                                platform: partner.platform || 'unknown',[m
[31m-                                telegramData: partner.telegramData || null,[m
[31m-                                profilePicture: null,[m
[31m-                                isOnline: true,[m
[31m-                                lastSeen: null[m
[31m-                            });[m
[31m-                        }[m
[31m-                    }[m
[32m+[m[32m                    setChat(chatData);[m
                 }[m
                 [m
[31m-                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —á–∞—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ[m
[31m-                setChat(chatDetails);[m
[31m-                [m
                 // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–∞—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—á–∞—Ç–∏)[m
                 const unsubscribe = onSnapshot(doc(db, 'chats', chatId), (doc) => {[m
                     if (doc.exists()) {[m
[36m@@ -322,14 +263,14 @@[m [mconst Chat = () => {[m
                 setupMessagesSubscription();[m
                 [m
                 // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –¥—Ä—É–∂–±—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏[m
[31m-                if (partnerIdForFriendCheck && partnerIdForFriendCheck !== 'support') {[m
[31m-                    await checkFriendStatus(partnerIdForFriendCheck);[m
[32m+[m[32m                if (chatData.participants && chatData.participants.length > 0) {[m
[32m+[m[32m                    const partnerId = chatData.participants.find(id => id !== userId);[m
[32m+[m[32m                    await checkFriendStatus(partnerId);[m
                 }[m
[31m-                [m
[31m-                setIsLoading(false);[m
[31m-            } catch (err) {[m
[31m-                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–µ—Ç–∞–ª–µ–π —á–∞—Ç–∞:', err);[m
[31m-                setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');[m
[32m+[m[32m            } catch (error) {[m
[32m+[m[32m                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞:', error);[m
[32m+[m[32m                setError(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–∞—Ç–∞: ${error.message}`);[m
[32m+[m[32m            } finally {[m
                 setIsLoading(false);[m
             }[m
         };[m
[36m@@ -647,13 +588,39 @@[m [mconst Chat = () => {[m
 [m
     const handleEndChatConfirm = async () => {[m
         try {[m
[32m+[m[32m            setIsLoading(true); // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏[m
[32m+[m[41m            [m
[32m+[m[32m            if (!chatId) {[m
[32m+[m[32m                showToast('–û—à–∏–±–∫–∞: ID —á–∞—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω', 'error');[m
[32m+[m[32m                setShowEndChatModal(false);[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è[m
[32m+[m[32m            if (!userId) {[m
[32m+[m[32m                showToast('–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');[m
[32m+[m[32m                setShowEndChatModal(false);[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —á–∞—Ç –µ—â–µ –∞–∫—Ç–∏–≤–µ–Ω[m
[32m+[m[32m            if (chat && !chat.isActive) {[m
[32m+[m[32m                showToast('–ß–∞—Ç —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω', 'info');[m
[32m+[m[32m                navigate('/chats');[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–∞—Ç–∞[m
             await endChat(chatId, userId);[m
             showToast('–ß–∞—Ç –∑–∞–≤–µ—Ä—à–µ–Ω', 'success');[m
             navigate('/chats');[m
         } catch (error) {[m
             console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —á–∞—Ç–∞:', error);[m
[31m-            showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç', 'error');[m
[32m+[m[41m            [m
[32m+[m[32m            // –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è[m
[32m+[m[32m            showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –ø–æ–∑–∂–µ.', 'error');[m
         } finally {[m
[32m+[m[32m            setIsLoading(false);[m
             setShowEndChatModal(false);[m
         }[m
     };[m
[36m@@ -1057,11 +1024,26 @@[m [mconst Chat = () => {[m
                             –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–æ—Ç —á–∞—Ç? –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–∞—Ç –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.[m
                         </div>[m
                         <div className="end-chat-modal-actions">[m
[31m-                            <button className="end-chat-modal-btn cancel" onClick={handleEndChatCancel}>[m
[32m+[m[32m                            <button[m[41m [m
[32m+[m[32m                                className="end-chat-modal-btn cancel"[m[41m [m
[32m+[m[32m                                onClick={handleEndChatCancel}[m
[32m+[m[32m                                disabled={isLoading}[m
[32m+[m[32m                            >[m
                                 –û—Ç–º–µ–Ω–∞[m
                             </button>[m
[31m-                            <button className="end-chat-modal-btn confirm" onClick={handleEndChatConfirm}>[m
[31m-                                –ó–∞–≤–µ—Ä—à–∏—Ç—å[m
[32m+[m[32m                            <button[m[41m [m
[32m+[m[32m                                className="end-chat-modal-btn confirm"[m[41m [m
[32m+[m[32m                                onClick={handleEndChatConfirm}[m
[32m+[m[32m                                disabled={isLoading}[m
[32m+[m[32m                            >[m
[32m+[m[32m                                {isLoading ? ([m
[32m+[m[32m                                    <>[m
[32m+[m[32m                                        <span className="loading-spinner"></span>[m
[32m+[m[32m                                        –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ...[m
[32m+[m[32m                                    </>[m
[32m+[m[32m                                ) : ([m
[32m+[m[32m                                    '–ó–∞–≤–µ—Ä—à–∏—Ç—å'[m
[32m+[m[32m                                )}[m
                             </button>[m
                         </div>[m
                     </div>[m
[1mdiff --git a/src/styles/Chat.css b/src/styles/Chat.css[m
[1mindex 8a1038d..1601d7b 100644[m
[1m--- a/src/styles/Chat.css[m
[1m+++ b/src/styles/Chat.css[m
[36m@@ -708,84 +708,87 @@[m
     position: fixed;[m
     top: 0;[m
     left: 0;[m
[31m-    width: 100%;[m
[31m-    height: 100%;[m
[31m-    background-color: rgba(0, 0, 0, 0.5);[m
[32m+[m[32m    right: 0;[m[41m[m
[32m+[m[32m    bottom: 0;[m[41m[m
[32m+[m[32m    background-color: rgba(0, 0, 0, 0.6);[m[41m[m
     display: flex;[m
[31m-    justify-content: center;[m
     align-items: center;[m
[31m-    z-index: 20;[m
[31m-    animation: fadeIn 0.3s ease;[m
[31m-}[m
[31m-[m
[31m-@keyframes fadeIn {[m
[31m-    from { opacity: 0; }[m
[31m-    to { opacity: 1; }[m
[32m+[m[32m    justify-content: center;[m[41m[m
[32m+[m[32m    z-index: 1000;[m[41m[m
[32m+[m[32m    animation: fadeIn 0.2s ease-out;[m[41m[m
[32m+[m[32m    backdrop-filter: blur(3px);[m[41m[m
 }[m
 [m
 .end-chat-modal-content {[m
[31m-    background-color: var(--tg-theme-bg-color, #ffffff);[m
[32m+[m[32m    background-color: var(--tg-theme-bg-color, #fff);[m[41m[m
     border-radius: 12px;[m
[31m-    padding: 20px;[m
[31m-    width: 85%;[m
[31m-    max-width: 320px;[m
[31m-    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);[m
[31m-    animation: modalSlideIn 0.3s ease;[m
[31m-}[m
[31m-[m
[31m-@keyframes modalSlideIn {[m
[31m-    from { transform: translateY(20px); opacity: 0; }[m
[31m-    to { transform: translateY(0); opacity: 1; }[m
[32m+[m[32m    padding: 24px;[m[41m[m
[32m+[m[32m    max-width: 90%;[m[41m[m
[32m+[m[32m    width: 330px;[m[41m[m
[32m+[m[32m    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);[m[41m[m
[32m+[m[32m    animation: scaleIn 0.2s ease-out;[m[41m[m
 }[m
 [m
 .end-chat-modal-title {[m
     font-size: 18px;[m
     font-weight: 600;[m
[31m-    margin-bottom: 12px;[m
[31m-    color: var(--tg-theme-text-color, #222222);[m
[31m-    text-align: center;[m
[32m+[m[32m    margin-bottom: 16px;[m[41m[m
[32m+[m[32m    color: var(--tg-theme-text-color, #000);[m[41m[m
 }[m
 [m
 .end-chat-modal-text {[m
[31m-    color: var(--tg-theme-text-color, #222222);[m
     font-size: 14px;[m
     line-height: 1.5;[m
[31m-    margin: 12px 0;[m
[32m+[m[32m    margin-bottom: 24px;[m[41m[m
[32m+[m[32m    color: var(--tg-theme-hint-color, #999);[m[41m[m
 }[m
 [m
 .end-chat-modal-actions {[m
     display: flex;[m
     justify-content: flex-end;[m
     gap: 12px;[m
[31m-    margin-top: 20px;[m
 }[m
 [m
 .end-chat-modal-btn {[m
[31m-    padding: 8px 16px;[m
[31m-    border: none;[m
[32m+[m[32m    padding: 10px 16px;[m[41m[m
     border-radius: 8px;[m
     font-size: 14px;[m
     font-weight: 500;[m
[32m+[m[32m    border: none;[m[41m[m
     cursor: pointer;[m
     transition: all 0.2s ease;[m
[32m+[m[32m    display: flex;[m[41m[m
[32m+[m[32m    align-items: center;[m[41m[m
[32m+[m[32m    justify-content: center;[m[41m[m
[32m+[m[32m    min-width: 90px;[m[41m[m
 }[m
 [m
 .end-chat-modal-btn.cancel {[m
[31m-    background-color: var(--tg-theme-secondary-bg-color, #f5f5f5);[m
[31m-    color: var(--tg-theme-text-color, #222222);[m
[32m+[m[32m    background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);[m[41m[m
[32m+[m[32m    color: var(--tg-theme-text-color, #000);[m[41m[m
 }[m
 [m
[31m-.end-chat-modal-btn.cancel:hover {[m
[32m+[m[32m.end-chat-modal-btn.cancel:hover:not(:disabled) {[m[41m[m
     background-color: var(--tg-theme-secondary-bg-color, #e5e5e5);[m
 }[m
 [m
 .end-chat-modal-btn.confirm {[m
[31m-    background-color: #e74c3c;[m
[31m-    color: white;[m
[32m+[m[32m    background-color: var(--tg-theme-button-color, #3390ec);[m[41m[m
[32m+[m[32m    color: var(--tg-theme-button-text-color, #fff);[m[41m[m
 }[m
 [m
[31m-.end-chat-modal-btn.confirm:hover {[m
[31m-    background-color: #c0392b;[m
[32m+[m[32m.end-chat-modal-btn.confirm:hover:not(:disabled) {[m[41m[m
[32m+[m[32m    background-color: var(--tg-theme-button-color, #2980dc);[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m@keyframes fadeIn {[m[41m[m
[32m+[m[32m    from { opacity: 0; }[m[41m[m
[32m+[m[32m    to { opacity: 1; }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m@keyframes scaleIn {[m[41m[m
[32m+[m[32m    from { transform: scale(0.9); opacity: 0; }[m[41m[m
[32m+[m[32m    to { transform: scale(1); opacity: 1; }[m[41m[m
 }[m
 [m
 /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π */[m
[36m@@ -1360,4 +1363,28 @@[m
         max-width: 768px;[m
         width: 100%;[m
     }[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –∫–Ω–æ–ø–∫–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–∞—Ç–∞ */[m[41m[m
[32m+[m[32m.loading-spinner {[m[41m[m
[32m+[m[32m    display: inline-block;[m[41m[m
[32m+[m[32m    width: 14px;[m[41m[m
[32m+[m[32m    height: 14px;[m[41m[m
[32m+[m[32m    border: 2px solid rgba(255, 255, 255, 0.3);[m[41m[m
[32m+[m[32m    border-radius: 50%;[m[41m[m
[32m+[m[32m    border-top-color: #fff;[m[41m[m
[32m+[m[32m    animation: spin 1s linear infinite;[m[41m[m
[32m+[m[32m    margin-right: 8px;[m[41m[m
[32m+[m[32m    vertical-align: middle;[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m@keyframes spin {[m[41m[m
[32m+[m[32m    to {[m[41m[m
[32m+[m[32m   